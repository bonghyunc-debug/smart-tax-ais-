# 세법 정합성 및 오류 검토 노트

## 전제
- 대상: `utils/taxCalculations.ts`의 양도소득세 계산 로직 중심 검토
- 세법 기준 연도: 코드상 2022/2023 세율 테이블 사용으로 보아 **2023년 이후 양도분**을 기본 가정
- 확실/불확실을 구분해 기록

## 핵심 우려 사항
1. **비사업용 토지 중과 및 단기양도세율 조합(추가 확인 필요)**  
   - `calculateTaxRate`에서 비사업용 토지(`landUseType === 'non-business'`)는 기본세율+10%p와 단기세율(50%/40%)을 비교해 큰 값 적용.  
   - 2022~2024년 세법에서는 비사업용 토지 중과율(+10%p)과 별도로 **1년 미만 70%, 1~2년 미만 60%** 단기 중과 규정이 공존하므로, 현재 50%/40% 단기 세율은 법정 세율보다 낮을 가능성이 높음(확인 필요).  
   - 조정대상지역 여부, 2022.1.1. 이후 양도분 여부 등에 따른 변동이 있으니 명확한 근거를 추가 확인 필요.

2. **증여·상속 취득 자산의 증여세 기납부액 미반영(확실)**  
   - `TaxState.giftTaxPaid` 필드가 존재하지만 `calculateTax` 어디에서도 사용되지 않음.  
   - 이월과세 대상 증여·상속 자산의 양도세 계산 시, 납부한 증여세액을 취득가액에 가산하거나 세액공제 대상으로 활용해야 하는데 현재 로직에 반영되지 않아 과세표준이 과대 산정될 수 있음.

3. **공익사업 현금보상 감면·농특세 계산의 연도 경계 설명 부족(추가 확인 필요)**  
   - `calculateExemptionLogic`에서 공익사업 현금보상 감면율을 양도일이 `2025-01-01` 이후면 15%, 이전이면 10%로 적용하고 감면세액의 20%를 농특세로 산정.  
   - 실제 법령(소득세법 및 공익사업법 특례)에 따른 연도별 변동 근거 주석이나 링크가 없어 유지보수자가 세법 변경에 대응하기 어려움.  
   - 추가로, 감면세액 농특세 부과 면제 예외(예: 감면 한도, 면제 대상) 검토 필요.

4. **건물 신축 후 5년 이내 환산 취득가액 사용 시 5% 가산세 로직 근거 미표시(추가 확인 필요)**  
   - `constructionPenalty` 계산이 신축·환산취득가액·5년 이내 조건을 모두 만족하면 취득가액의 5%를 추가 세액으로 더함.  
   - 이는 실제 법령상의 '건축물 신축 후 5년 내 환산가액 사용 제한' 규정을 의도한 것으로 보이나, 정확한 조문·적용 대상을 명시하지 않아 오·남용 위험이 있음.  
   - 가산세 적용 순서(산출세액, 결정세액)와 감면 적용 여부도 불명확.

5. **주말·노동절만 고려한 신고기한 연장(확실)**  
   - `calculateDeadline`이 토요일·일요일·근로자의 날(5/1)만 휴일로 처리.  
   - 공휴일(설·추석, 어린이날 대체휴일 등)을 반영하지 않아 실제 법정 신고·납부기한 계산과 어긋날 수 있음.  
   - 최소한 양도소득세 신고기간 중 자주 발생하는 공휴일을 고려하거나, 캘린더 API/목록을 주입하는 구조 개선 필요.

6. **고가 1세대 1주택 비과세 한도 적용 방식의 근거 주석 부족(추가 확인 필요)**  
   - `taxableGain` 산정 시 고가주택 12억 한도를 매각가액 또는 증여가액 기준으로 비례 배분.  
   - 12억 공제액 적용 방식은 일반적으로 **실제 양도가액**을 기준으로 과세대상 gain을 안분하므로, 부담부증여 시 증여재산평가액을 사용하는 현재 분기 처리가 적정한지 추가 확인 필요.

## 빠른 보완 제안
- 위 항목 중 확실한 결함인 **증여세 기납부액 미반영**을 우선 수정하고, 나머지 항목은 법령 근거를 찾아 주석·스위치(연도/지역별)로 명시하는 것을 권장.
- 공휴일 계산, 비사업용 토지 단기세율 등은 별도 유닛 테스트 케이스를 추가해 회귀 검증 필요.

## 테스트 아이디어
1. **증여세 가산 반영 케이스**: 증여로 취득 후 양도, `giftTaxPaid` 1,000만 원 입력 시 취득가액에 가산되어 과세표준이 감소하는지 확인.
2. **비사업용 토지 단기 양도**: 취득 6개월 후 양도(양도가액 5억, 취득가액 3억) 시 단기세율 70%/60% 비교 결과를 기대값과 대조.
3. **공휴일 포함 신고기한**: 양도일이 4월 1일이고 6월 6일(현충일)이 납부기한 월 말 전 주말/공휴일일 때 기한이 다음 영업일로 이월되는지 확인.
